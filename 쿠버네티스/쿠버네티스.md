# 쿠버네티스
- 쿠버네티스는 대부분의 리소스를 **오브젝트** 형태로 관리
  - Pods: 컨테이너의 집합
  - Replica Set: 컨테이너의 집합을 관리하는 컨트롤러
  - Service Account: 사용자
  - Node: 노드
  - `kubectl explain` 명령어로 특정 오브젝트의 간단한 설명 조회
- 쿠버네티스는 명령어로도 사용가능하나, YAML 파일을 더 많이 사용함
  - YAML 파일로 컨테이너 리소스를 생성하거나 삭제함
  - 컨테이너뿐만 아니라 거의 모든 리소스 오브젝트들에 사용될 수 있음
    - 컨테이너 자체, 컨테이너의 설정값(ConfigMap), 비밀값(Secrets) 등 YAML 파일로 정의해 사용함
    - 쿠버네티스에서 실제로 서비스를 배포할 때에도 여러개의 YAML 파일을 정의해 쿠버네티스에 적용시키는 방식으로 동작
- 쿠버네티스는 여러 개의 컴포넌트로 구성돼 있음
  - 쿠버네티스의 노드
    - 마스터 노드: 쿠버네티스가 제대로 동작할 수 있게 클러스터를 관리하는 역할
    - 워커 노드: 애플리케이션 컨테이너가 생성됨
  - 클러스터를 관리하기 위해 여러 종류의 컴포넌트들이 동시에 실행됨
    - Ex) 마스터 노드에서 API서버, 컨트롤러 매니저, 스케줄러, DNS 서버 등 실행되고, 모든 노드에서는 오버레이 네트워크 구성을 위해 프록시와 네트워크 플러그인이 실행됨
  - 쿠버네티스 클러스터 구성을 위해 **kubelet**이라는 에이전트가 모든 노드에서 실행됨
    - kubelet은 컨테이너의 생성, 삭제 및 마스터와 워커 노드 간의 통신 역할을 함께 담당하는 중요한 에이전트임
    - OCI(Open Container Initiative)라는 컨테이너 런타임 표준을 구현한 컨테이너 런타임을 갖추고 있다면 됨

- Pod: 컨테이너를 다루는 기본 단위
  - 파드는 1개 이상의 컨테이너로 구성된 컨테이너의 집합
  - Ex) Nginx 웹 서비스를 쿠버네티스에서 생성하려면?
    - 파드 1개에 Nginx 컨테이너 1개만을 포함해 생성
  - Ex) 동일한 Nginx 컨테이너를 여러개 생성하고 싶다면
    - 1개의 Nginx 컨테이너가 들어 있는 동일한 파드를 여러개 생성하면 됨
  - Ex) nginx-pod.yaml
    ```yaml
    apiVersion: v1
    kind: Pod
    metadata:
      name: my-nginx-pod
    spec:
      containers:
      - name: my-ningx-container
        image: nginx:latest
        ports:
        - containerPort: 80
          protocol: TCP
    ```
    - YAML 파일은 일반적으로 apiVersion, kind, metatdata, spec 네가지 항목으로 구성됨
      - apiVersion: 오브젝트의 API 버전
      - kind: 이 리소스의 종류, `kubectl api-resources` 명령어의 KIND 항목에서 사용할 수 있는 리소스 오브젝트 종류 조회 가능
      - metatdata: 라벨, annotation, 이름 등 부가 정보
      - spec: 리소스를 생성하기 위한 자세한 정보, 위 예시에서는 파드에서 실행될 컨테이너 정보를 정의하는 containers 항목을 작성하고, image에서 사용할 도커 이미지 지정
