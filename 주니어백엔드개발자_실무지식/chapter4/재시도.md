# 재시도: 외부 연동 실패시 처리 방법 중 하나
- 네트워크 통신 과정에서 연결에 간헐적으로 실패하거나 일시적으로 응답이 느려질 때 -> 재시도를 통해 연동 실패를 성공으로 바꾸자
- 재시도 가능 조건(연동 API를 다시 호출해도 되는 조건인지 확인)
  - Ex) 포인트 서비스가 제공하는 API를 호출해 포인트를 차감하는 상황
    - 호출하는 과정에서 읽기 타임아웃 발생시 재시도를 하게 된다면 포인트가 2번 차감될 수 있음
    - 읽기 타임에러가 발생하더라도 포인트 서비스는 차감 처리를 계속 진행함
  - 단순 조회 기능: 포인트 내역 조회 등
  - 연결 타임아웃: 연동 서비스에 아직 연결되지 않은 상태, 재시도로 연결에 성공할 수 있음
    - but, 읽기 타임아웃은 주의, 이미 연동 서비스가 요청을 처리중
  - 멱등성을 가진 변경 기능: 좋아요 기능 등
    - 멱등성: 연산을 여러번 적용해도 결과가 달라지지 않는 성질
- 같은 API라도 실패 원인에 따라 재시도 여부 결정
  - 검증 오류는 재시도를 할 이유가 거의 없음

- 재시도 횟수와 간격
  - 재시도 횟수: 1 ~ 2번의 재시도가 적당
    - 2번 재시도하면 총 3번 시도한 것이 됨 -> 다시 재시도하더라도 또 실패할 확률이 높음
  - 재시도 간격: 여러 차례 재시도할 때 재시도 간격을 점진적으로 늘리기도 함 -> 연동 서버에 가해지는 부하 일부 완화 가능

- 재시도 폭풍(retry storm) 안티패턴
  - Ex) 연동 서비스의 성능이 느려져서 읽기 타임아웃이 발생한 상황
    - 이때 재시도하게 되면, 연동 서비스는 같은 요청을 두배로 받게 됨
    - 성능이 느려진 상태에서 새로운 요청까지 더해지면 연동 서비스의 성능이 더 나빠짐
  - 재시도 검토시 연동 서비스의 성능 상황도 함께 고려
